#{extends 'main.html' /}
#{set title:'YouFood - Clients' /}

<header class="jumbotron subhead">
    <h1>Menu</h1>
    #{a @Clients.index(restaurant.id,table.id)}Home#{/a}
</header>

<div class="row">
    <div class="span8">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Category</th>
                </tr>
            </thead>
            <tbody>
                #{list categories, as:'category'}
                    <tr>
                        <td>#{a @items(restaurant.id, table.id, category.id)}${category.name}#{/a}</td>
                    </tr>
                #{/list}
            </tbody>
        </table> 
    </div>
    <div class="span4">
        <h2>Card</h2>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Items</th>
                    <th>Price</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
                #{if card != null}
                    #{list card.listItems, as:'item'}
                        <tr>
                            <td>${item.name}</td>
                            <td>${item.price}</td>
                            <td>#{a @Cards.deleteItem(table.id, item.id)}Delete#{/a}</td>
                        </tr>
                    #{/list}
                #{/if}
                #{else}
                    <tr>
                        <td colspan="3">No Items</td>
                    </tr>
                #{/else}
            </tbody>
        </table> 
        #{if card != null}
            <h3>Subtotal : ${card.totalPrice} $</h3><br/>
            #{a @card(restaurant.id,table.id)}ORDER#{/a}
        #{/if}
    </div>
</div>
